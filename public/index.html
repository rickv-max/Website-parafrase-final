<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parafrase & Alat AI Lengkap</title>

    <!-- Semua Meta Tag SEO & Kode Google Analytics Anda bisa diletakkan di sini -->

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsdiff/5.1.0/diff.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body{font-family:'Inter',sans-serif;background-color:#0f172a}.glassmorphism{background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.2)}textarea::placeholder{color:#94a3b8}.custom-scrollbar::-webkit-scrollbar{width:8px}.custom-scrollbar::-webkit-scrollbar-track{background:transparent}.custom-scrollbar::-webkit-scrollbar-thumb{background-color:#475569;border-radius:10px;border:2px solid transparent;background-clip:content-box}@keyframes spin{to{transform:rotate(360deg)}}.loader{animation:spin 1s linear infinite}.highlight{background-color:rgba(99,102,241,0.3);color:#c7d2fe;border-radius:4px;padding:2px 1px;font-weight:500}
        .highlight-risk{background-color: rgba(251, 191, 36, 0.3); color: #fef3c7; border-radius: 4px; padding: 2px 1px; font-weight: 500;}
        .suggestion-badge { position: absolute; top: -0.5rem; right: -0.5rem; font-size: 0.65rem; font-weight: 600; color: #10b981; background-color: rgba(16, 185, 129, 0.1); padding: 2px 6px; border-radius: 9999px; border: 1px solid rgba(16, 185, 129, 0.3); pointer-events: none; transform: rotate(15deg); }
    </style>
</head>
<body class="text-white antialiased">

<!-- === HEADER BARU DENGAN MENU === -->
<header class="bg-slate-900/50 backdrop-blur-lg sticky top-0 z-50 w-full border-b border-slate-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
            <div class="flex items-center">
                <span class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-cyan-400">
                    Parafraser Pro
                </span>
            </div>
            <div class="relative">
                <button id="menu-button" class="p-2 rounded-md text-slate-300 hover:text-white hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-white">
                    <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
                <!-- Panel Menu Dropdown -->
                <div id="menu-panel" class="hidden origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-slate-800 ring-1 ring-black ring-opacity-5 focus:outline-none">
                    <div class="py-1" role="menu" aria-orientation="vertical" aria-labelledby="menu-button">
                        <a href="#" class="menu-item block px-4 py-2 text-sm text-slate-200 hover:bg-slate-700" role="menuitem" data-page="paraphraser">Paraphrasing Tool</a>
                        <a href="#" class="menu-item block px-4 py-2 text-sm text-slate-200 hover:bg-slate-700" role="menuitem" data-page="ai-detector">AI Detector</a>
                        <a href="#" class="menu-item block px-4 py-2 text-sm text-slate-200 hover:bg-slate-700" role="menuitem" data-page="humanizer">Humanize AI Text</a>
                        <a href="#" class="menu-item block px-4 py-2 text-sm text-slate-200 hover:bg-slate-700" role="menuitem" data-page="plagiarism-checker">Plagiarism Checker</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- === KONTEN UTAMA YANG BISA BERGANTI-GANTI === -->
<div id="main-content-container" class="w-full">

    <!-- Halaman 1: Paraphrasing Tool (yang sudah kita buat) -->
    <div id="page-paraphraser" class="page-content">
        <div class="min-h-[calc(100vh-4rem)] flex flex-col items-center justify-center p-4">
            <main class="w-full max-w-6xl flex flex-col lg:flex-row items-start gap-6">
                <!-- Semua kode <main> dari Paraphraser Anda yang lama diletakkan di sini -->
                <div class="w-full lg:w-1/2 flex flex-col gap-4">
                    <div class="glassmorphism rounded-xl p-3"><div id="mode-container" class="grid grid-cols-2 sm:grid-cols-3 gap-2"><button class="mode-button relative" data-mode="standard">Standard <span class="suggestion-badge">Saran</span></button><button class="mode-button" data-mode="formal">Formal</button><button class="mode-button" data-mode="creative">Kreatif</button><button class="mode-button" data-mode="simple">Sederhana</button><button class="mode-button col-span-2 sm:col-span-1 relative" data-mode="mahasiswa">Mahasiswa <span class="suggestion-badge">Saran</span></button></div></div>
                    <div class="glassmorphism rounded-xl p-6 h-full flex-grow flex flex-col"><div class="flex justify-between items-center mb-4"><h2 class="text-xl font-semibold text-slate-200">Teks Asli</h2><button id="clear-button" title="Bersihkan Teks" class="text-slate-400 hover:text-white transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg></button></div><textarea id="original-text" class="custom-scrollbar w-full h-64 md:h-80 flex-grow bg-slate-800/50 p-4 rounded-lg text-slate-300 placeholder-slate-500 focus:ring-2 focus:ring-indigo-500 focus:outline-none transition resize-none" placeholder="Masukkan atau tempel teks Anda di sini..."></textarea></div>
                </div>
                <div class="w-full lg:w-auto flex items-center justify-center py-4 lg:py-0 lg:self-center"><button id="paraphrase-button" class="w-full lg:w-auto bg-gradient-to-r from-indigo-500 to-cyan-500 hover:from-indigo-600 hover:to-cyan-600 text-white font-bold py-3 px-6 rounded-full shadow-lg hover:shadow-cyan-500/50 transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-3"><span id="button-text">Parafrase</span><div id="loader" class="hidden loader w-5 h-5 border-2 border-white border-t-transparent rounded-full"></div></button></div>
                <div class="w-full lg:w-1/2 flex flex-col gap-4"><div class="glassmorphism rounded-xl p-6 h-full flex flex-col flex-grow"><div class="flex justify-between items-center mb-4"><h2 class="text-xl font-semibold text-slate-200">Hasil Parafrase</h2><button id="copy-button" title="Salin Hasil" class="text-slate-400 hover:text-white transition-colors flex items-center gap-2"><span id="copy-text">Salin</span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></div><div id="paraphrased-text" class="custom-scrollbar w-full flex-grow bg-slate-800/50 p-4 rounded-lg text-slate-300 overflow-y-auto leading-relaxed"><span class="text-slate-500">Hasil parafrase akan muncul di sini...</span></div></div><div id="authenticity-container" class="hidden glassmorphism rounded-xl p-4 flex flex-col gap-3"><button id="check-authenticity-button" class="w-full bg-amber-500 hover:bg-amber-600 text-slate-900 font-bold py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.38 3.46 16 2a4 4 0 0 0-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z"></path></svg> <span>Cek Keaslian</span></button><div id="authenticity-result" class="text-sm text-slate-300 p-3 bg-slate-800/50 rounded-lg hidden"></div></div></div>
            </main>
        </div>
    </div>

    <!-- Halaman 2: AI Detector (Placeholder) -->
    <div id="page-ai-detector" class="page-content hidden">
        <div class="min-h-[calc(100vh-4rem)] flex flex-col items-center justify-center p-4 text-center">
            <h2 class="text-3xl font-bold text-slate-300">AI Detector</h2>
            <p class="text-slate-500 mt-2">Fitur untuk mendeteksi apakah sebuah teks ditulis oleh AI akan segera hadir!</p>
        </div>
    </div>

    <!-- Halaman 3: Humanize AI Text (Placeholder) -->
    <div id="page-humanizer" class="page-content hidden">
        <div class="min-h-[calc(100vh-4rem)] flex flex-col items-center justify-center p-4 text-center">
            <h2 class="text-3xl font-bold text-slate-300">Humanize AI Text</h2>
            <p class="text-slate-500 mt-2">Fitur untuk mengubah tulisan AI menjadi gaya bahasa manusia yang lebih natural akan segera hadir!</p>
        </div>
    </div>

    <!-- Halaman 4: Plagiarism Checker (Placeholder) -->
    <div id="page-plagiarism-checker" class="page-content hidden">
        <div class="min-h-[calc(100vh-4rem)] flex flex-col items-center justify-center p-4 text-center">
            <h2 class="text-3xl font-bold text-slate-300">Plagiarism Checker</h2>
            <p class="text-slate-500 mt-2">Alat untuk memeriksa tingkat plagiarisme pada tulisan Anda akan segera hadir!</p>
        </div>
    </div>

</div>

<script>
    // --- LOGIKA LAMA (paraphraser) DITAMBAH LOGIKA BARU (navigasi) ---

    // --- Bagian Navigasi & Halaman ---
    const menuButton = document.getElementById('menu-button');
    const menuPanel = document.getElementById('menu-panel');
    const menuItems = document.querySelectorAll('.menu-item');
    const pages = document.querySelectorAll('.page-content');

    menuButton.addEventListener('click', () => {
        menuPanel.classList.toggle('hidden');
    });

    menuItems.forEach(item => {
        item.addEventListener('click', (event) => {
            event.preventDefault();
            const targetPageId = 'page-' + item.dataset.page;

            // Sembunyikan semua halaman
            pages.forEach(page => {
                page.classList.add('hidden');
            });

            // Tampilkan halaman yang dituju
            const targetPage = document.getElementById(targetPageId);
            if (targetPage) {
                targetPage.classList.remove('hidden');
            }

            // Sembunyikan menu setelah diklik
            menuPanel.classList.add('hidden');
        });
    });


    // --- Bagian Parafrase (Kode yang sudah ada sebelumnya) ---
    const originalTextInput = document.getElementById('original-text');
    const paraphrasedTextOutput = document.getElementById('paraphrased-text');
    const paraphraseButton = document.getElementById('paraphrase-button');
    const copyButton = document.getElementById('copy-button');
    // ... dan semua variabel dan fungsi lainnya dari kode terakhir Anda ...
    const clearButton=document.getElementById("clear-button"),loader=document.getElementById("loader"),buttonText=document.getElementById("button-text"),copyText=document.getElementById("copy-text"),modeButtons=document.querySelectorAll(".mode-button"),authenticityContainer=document.getElementById("authenticity-container"),checkButton=document.getElementById("check-authenticity-button"),resultDiv=document.getElementById("authenticity-result"),activeModeClass="bg-indigo-600 text-white font-semibold",inactiveModeClass="bg-slate-700 hover:bg-slate-600 text-slate-300";let currentMode="standard";const prompts={standard:"Tugas Anda adalah memparafrase teks berikut. Ubah struktur setiap kalimat secara signifikan dan ganti pilihan kata dengan sinonim yang relevan. Pastikan SEMUA makna dan detail informasi dari teks asli tetap utuh. JANGAN meringkas. Langsung berikan teks yang sudah jadi tanpa kalimat pembuka atau analisis.",formal:"Anda adalah editor akademis. Parafrasekan teks berikut ke dalam gaya bahasa yang sangat formal dan objektif. Pertahankan semua detail informasi dengan presisi tinggi. Langsung berikan teksnya tanpa basa-basi.",creative:"Anda adalah seorang novelis. Ubah teks berikut menjadi narasi yang lebih hidup dan ekspresif. Pertahankan semua informasi inti, namun sajikan dengan kosakata yang kaya dan struktur kalimat yang menarik. Langsung berikan hasilnya tanpa pengantar.",simple:"Jelaskan kembali teks berikut dengan bahasa yang sangat sederhana. Pecah kalimat panjang menjadi kalimat-kalimat pendek dan ganti kata sulit dengan padanan umum, namun jangan sampai ada informasi yang hilang. Langsung berikan hasilnya.",mahasiswa:"Anda adalah mahasiswa yang sedang menyusun skripsi. Parafrasekan teks berikut dengan gaya bahasa akademis. Fokus utama Anda adalah mengubah kalimat asli untuk menghindari plagiarisme dengan mengubah struktur kalimat dan menggunakan sinonim yang tepat. Pastikan semua data dan detail tetap ada. Langsung berikan hasilnya tanpa analisis."};async function handleParaphrase(){const e=originalTextInput.value.trim();if(!e)return void(paraphrasedTextOutput.innerHTML='<span class="text-yellow-400">Silakan masukkan teks terlebih dahulu.</span>');setLoading(!0),paraphrasedTextOutput.innerHTML='<span class="text-slate-500">Sedang memproses...</span>',authenticityContainer.classList.add("hidden");try{const t=await fetch("/api/paraphrase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:currentMode,text:e})});if(!t.ok){const e=await t.json();throw new Error(e.error?.message||`API Error: ${t.status}`)}const n=await t.json(),o=n.candidates?.[0]?.content?.parts?.[0]?.text;if(o){const e=cleanAiResponse(o);displayHighlightedDiff(originalTextInput.value.trim(),e),authenticityContainer.classList.remove("hidden")}else throw new Error("Tidak ada konten yang dihasilkan oleh AI.")}catch(e){console.error("Error during paraphrasing:",e),paraphrasedTextOutput.innerHTML=`<span class="text-red-400">Maaf, terjadi kesalahan. Detail: ${e.message}</span>`}finally{setLoading(!1)}}function cleanAiResponse(e){let t=e.trim();const n=e.split("\n").filter(e=>e.trim()!=="");if(n.length>1){const e=["Pilihan","Parafrase","Versi","Berikut adalah"];let o=n[0];for(const t of n){const n=e.some(e=>t.trim().toLowerCase().startsWith(e.toLowerCase())),s=t.includes(":");if(!n&&!s){o=t;break}}if(o===n[0]){const t=n[n.length-1],s=e.some(e=>t.trim().toLowerCase().startsWith(e.toLowerCase()));s||(o=t)}t=o}return t=t.replace(/^(oke, baik\.|baik, |tentu, |berikut adalah.*?:\s*|pilihan \d:|\d\.\s*|`{3}json|`{3})/i,"").trim(),t}function displayHighlightedDiff(e,t){const n=Diff.diffWords(e,t,{ignoreCase:!1}),o=document.createDocumentFragment();n.forEach(e=>{let t;e.added?(t=document.createElement("span"),t.className="highlight",t.textContent=e.value):e.removed||(t=document.createTextNode(e.value)),t&&o.appendChild(t)}),paraphrasedTextOutput.innerHTML="",paraphrasedTextOutput.appendChild(o)}async function handleAuthenticityCheck(){const e=paraphrasedTextOutput.innerText;if(!e)return;resultDiv.classList.remove("hidden"),resultDiv.innerHTML='<span class="text-slate-400">Menganalisis keaslian teks...</span>',checkButton.disabled=!0;try{const t=await fetch("/api/check-authenticity",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e})});if(!t.ok)throw new Error("Gagal menghubungi server analisis.");const n=await t.json();if(resultDiv.innerHTML=n.summary||"Analisis selesai.",n.risky_sentences&&n.risky_sentences.length>0){let e=paraphrasedTextOutput.innerHTML;n.risky_sentences.forEach(t=>{const n=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),o=new RegExp(n,"gi");e=e.replace(o,`<span class="highlight-risk">${t}</span>`)}),paraphrasedTextOutput.innerHTML=e}}catch(e){resultDiv.innerHTML=`<span class="text-red-400">Error: ${e.message}</span>`}finally{checkButton.disabled=!1}}function handleCopy(){const e=paraphrasedTextOutput.innerText;if(e&&!paraphrasedTextOutput.querySelector("span.text-slate-500")){const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),copyText.innerText="Tersalin!",setTimeout(()=>{copyText.innerText="Salin"},2e3)}}function setLoading(e){paraphraseButton.disabled=e,loader.classList.toggle("hidden",!e),buttonText.classList.toggle("hidden",e)}function updateActiveButton(e){modeButtons.forEach(t=>{t.classList.remove(...activeModeClass.split(" ")),t.classList.add(...inactiveModeClass.split(" "))}),e.classList.remove(...inactiveModeClass.split(" ")),e.classList.add(...activeModeClass.split(" "))}function init(){paraphraseButton.addEventListener("click",handleParaphrase),copyButton.addEventListener("click",handleCopy),clearButton.addEventListener("click",()=>originalTextInput.value=""),checkButton.addEventListener("click",handleAuthenticityCheck),modeButtons.forEach(e=>{e.addEventListener("click",()=>{currentMode=e.dataset.mode,updateActiveButton(e)})}),updateActiveButton(document.querySelector('.mode-button[data-mode="standard"]'))}init();

</script>
</body>
</html>
